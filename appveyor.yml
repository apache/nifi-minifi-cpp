image: Visual Studio 2017

environment:
  MSVC_DEFAULT_OPTIONS: ON
  APPVEYOR_SAVE_CACHE_ON_ERROR: true
  
cache: 
- build\curl-install\ -> appveyor.yml
- build\libressl-install\ -> appveyor.yml
- build\zlib-install\ -> appveyor.yml
- build\thirdparty\civetweb-1.10 -> appveyor.yml
- build\thirdparty\cxxopts -> appveyor.yml
- build\thirdparty\rocksdb -> appveyor.yml
- build\thirdparty\ -> appveyor.yml
- build\thirdparty\yaml-cpp-yaml-cpp-20171024 -> appveyor.yml

clone_folder: C:\projects\nifi-minifi-cpp
  
build_script:
   - cd C:\projects\nifi-minifi-cpp
   - mkdir build & exit 0
   - cd build
   - cmake -G "Visual Studio 15 2017" -DCMAKE_BUILD_TYPE_INIT=Release -DCMAKE_BUILD_TYPE=Release -DWIN32=WIN32  -DOPENSSL_OFF=OFF  -DUSE_SHARED_LIBS=OFF -DDISABLE_CONTROLLER=ON  -DBUILD_ROCKSDB=ON -DFORCE_WINDOWS=ON -DUSE_SYSTEM_UUID=OFF -DDISABLE_LIBARCHIVE=ON -DDISABLE_SCRIPTING=ON -DEXCLUDE_BOOST=ON -DENABLE_WEL=TRUE -DSKIP_TESTS=ON -DFAIL_ON_WARNINGS=OFF .. 
   - set msbuild_platform=x64 
   -  msbuild /m nifi-minifi-cpp.sln /property:Configuration=Release
